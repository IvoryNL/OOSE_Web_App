using Logic.DocumentImporter.Onderwijsmodules;
using Logic.Models.DocumentExportEnImport;
using Presentation.Controllers;
using System.Text;

namespace OOSE_APP_Test
{
    public class ImportOnderwijsmoduleTest : BaseController
    {
        private Onderwijsmodule onderwijsmodule;
        public ImportOnderwijsmoduleTest()
        {
            onderwijsmodule = new Onderwijsmodule();
            onderwijsmodule.SetImportStrategy(new ImportOnderwijsmoduleFromJsonStringStrategy());
        }

        [Fact]
        public void ImportOnderwijsmoduleFromJsonTest()
        {
            var jsonBytes = Encoding.Default.GetBytes("{\r\n    \"OpleidingId\":1,\r\n    \"Naam\":\"Module 1 test\",\r\n    \"Beschrijving\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\",\r\n    \"Coordinator\":\"Lorem ipsum\",\r\n    \"Studiepunten\":30,\r\n    \"Fase\":\"Hoofdfase\",\r\n    \"Ingangseisen\":\"Lorem ipsum test\",\r\n    \"Leerjaar\":1,\r\n    \"Versie\":0.02,\r\n    \"Opleiding\":null,\r\n    \"Onderwijseenheden\":[\r\n      {\r\n         \"Naam\":\"Onderwijseenheid 1 test\",\r\n         \"Beschrijving\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\",\r\n         \"Coordinator\":\"Lorem ipsum\",\r\n         \"Studiepunten\":30.00,\r\n         \"Onderwijsmodules\":null,\r\n         \"Leerdoelen\":[\r\n            {\r\n               \"Naam\":\"Leerdoel 11 test\",\r\n               \"Beschrijving\":\"Dit is leerdoel 1\",\r\n               \"Onderwijseenheid\":null,\r\n               \"Leeruitkomsten\":[\r\n                  {\r\n                     \"Naam\":\"Leeruitkomst 111 test\",\r\n                     \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                     \"Leerdoel\":null,\r\n                     \"Tentamens\":null,\r\n                     \"Lessen\":null\r\n                  },\r\n                  {\r\n                     \"Naam\":\"Leeruitkomst 112 test\",\r\n                     \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                     \"Leerdoel\":null,\r\n                     \"Tentamens\":null,\r\n                     \"Lessen\":null\r\n                  }\r\n               ]\r\n            },\r\n            {\r\n              \"Naam\":\"Leerdoel 12 test\",\r\n              \"Beschrijving\":\"Dit is leerdoel 1\",\r\n              \"Onderwijseenheid\":null,\r\n              \"Leeruitkomsten\":[\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 121 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 },\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 122 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 }\r\n              ]\r\n           },\r\n           {\r\n              \"Naam\":\"Leerdoel 13 test\",\r\n              \"Beschrijving\":\"Dit is leerdoel 1\",\r\n              \"Onderwijseenheid\":null,\r\n              \"Leeruitkomsten\":[\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 131 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 },\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 132 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 }\r\n              ]\r\n           }\r\n         ],\r\n         \"ExporteerDocument\":{\r\n            \r\n         },\r\n         \"ImporteerDocument\":null\r\n      },\r\n      {\r\n        \"Naam\":\"Onderwijseenheid 2 test\",\r\n        \"Beschrijving\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\",\r\n        \"Coordinator\":\"Lorem ipsum\",\r\n        \"Studiepunten\":30.00,\r\n        \"Onderwijsmodules\":null,\r\n        \"Leerdoelen\":[\r\n           {\r\n              \"Naam\":\"Leerdoel 21 test\",\r\n              \"Beschrijving\":\"Dit is leerdoel 1\",\r\n              \"Onderwijseenheid\":null,\r\n              \"Leeruitkomsten\":[\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 211 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 },\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 212 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 }\r\n              ]\r\n           },\r\n           {\r\n             \"Naam\":\"Leerdoel 22 test\",\r\n             \"Beschrijving\":\"Dit is leerdoel 1\",\r\n             \"Onderwijseenheid\":null,\r\n             \"Leeruitkomsten\":[\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 221 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                },\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 222 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                }\r\n             ]\r\n          },\r\n          {\r\n             \"Naam\":\"Leerdoel 23 test\",\r\n             \"Beschrijving\":\"Dit is leerdoel 1\",\r\n             \"Onderwijseenheid\":null,\r\n             \"Leeruitkomsten\":[\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 231 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                },\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 232 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                }\r\n             ]\r\n          }\r\n        ],\r\n        \"ExporteerDocument\":{\r\n           \r\n        },\r\n        \"ImporteerDocument\":null\r\n     },\r\n     {\r\n        \"Naam\":\"Onderwijseenheid 3 test\",\r\n        \"Beschrijving\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\",\r\n        \"Coordinator\":\"Lorem ipsum\",\r\n        \"Studiepunten\":30.00,\r\n        \"Onderwijsmodules\":null,\r\n        \"Leerdoelen\":[\r\n           {\r\n              \"Naam\":\"Leerdoel 31 test\",\r\n              \"Beschrijving\":\"Dit is leerdoel 1\",\r\n              \"Onderwijseenheid\":null,\r\n              \"Leeruitkomsten\":[\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 311 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 },\r\n                 {\r\n                    \"Naam\":\"Leeruitkomst 312 test\",\r\n                    \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                    \"Leerdoel\":null,\r\n                    \"Tentamens\":null,\r\n                    \"Lessen\":null\r\n                 }\r\n              ]\r\n           },\r\n           {\r\n             \"Naam\":\"Leerdoel 32 test\",\r\n             \"Beschrijving\":\"Dit is leerdoel 1\",\r\n             \"Onderwijseenheid\":null,\r\n             \"Leeruitkomsten\":[\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 321 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                },\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 322 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                }\r\n             ]\r\n          },\r\n          {\r\n             \"Naam\":\"Leerdoel 33 test\",\r\n             \"Beschrijving\":\"Dit is leerdoel 1\",\r\n             \"Onderwijseenheid\":null,\r\n             \"Leeruitkomsten\":[\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 331 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 1\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                },\r\n                {\r\n                   \"Naam\":\"Leeruitkomst 332 test\",\r\n                   \"Beschrijving\":\"Dit is leeruitkomst 2\",\r\n                   \"Leerdoel\":null,\r\n                   \"Tentamens\":null,\r\n                   \"Lessen\":null\r\n                }\r\n             ]\r\n          }\r\n        ],\r\n        \"ExporteerDocument\":{\r\n           \r\n        },\r\n        \"ImporteerDocument\":null\r\n     }\r\n    ],\r\n    \"Onderwijsuitvoeringen\":null,\r\n    \"ExporteerDocument\":{\r\n       \r\n    },\r\n    \"ImporteerDocument\":null\r\n }");
            var inhoud = onderwijsmodule.Importeer(jsonBytes);
            Assert.NotNull(inhoud);
        }
    }
}